<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Birthday Times | BroadSheet XVIII</title>

  <!-- Typography -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,900;1,400&family=UnifrakturMaguntia&family=EB+Garamond:wght@400;700&family=Courier+Prime&display=swap" rel="stylesheet">

  <!-- Effects -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>

  <style>
    /* =========================
       DESIGN SYSTEM
    ========================== */
    :root {
      --paper: #f1ede3;
      --ink: #1a1a1a;
      --wax-red: #8b0000;
      --cream: #e5dfcf;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      height: 100%;
      font-family: 'EB Garamond', serif;
      background: var(--cream);
      overflow: hidden;
      color: var(--ink);
    }

    /* =========================
       AMBIENT BACKGROUND
    ========================== */
    .petal {
      position: fixed;
      top: -10%;
      opacity: 0.3;
      font-size: 1.2rem;
      pointer-events: none;
      animation: fall linear infinite;
      z-index: 0;
    }

    @keyframes fall {
      to { transform: translateY(115vh) rotate(720deg); }
    }

    /* =========================
       LOCK SCREEN
    ========================== */
    #overlay {
      position: fixed;
      inset: 0;
      background: rgba(10,10,10,0.98);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      transition: opacity 0.8s ease;
    }

    #countdown {
      display: flex;
      gap: 20px;
      color: var(--paper);
      font-family: 'Courier Prime';
      margin-bottom: 40px;
    }

    .unit {
      text-align: center;
      min-width: 60px;
      border-bottom: 1px solid #444;
    }

    /* =========================
       ENVELOPE
    ========================== */
    .envelope-wrapper {
      position: relative;
      width: 420px;
      height: 280px;
      background: #e0d8c3;
      box-shadow: 0 50px 100px rgba(0,0,0,1);
      perspective: 2000px;
    }

    .flap {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 210px solid transparent;
      border-right: 210px solid transparent;
      border-top: 150px solid #cfc6ad;
      transform-origin: top;
      transition: transform 0.8s ease;
      z-index: 5;
    }

    .wax-seal {
      width: 85px;
      height: 85px;
      background: var(--wax-red);
      border-radius: 50%;
      position: absolute;
      top: 110px;
      left: 50%;
      transform: translateX(-50%);
      display: grid;
      place-items: center;
      font-family: 'UnifrakturMaguntia';
      font-size: 2rem;
      color: gold;
      cursor: pointer;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.4);
      transition: 0.7s;
      z-index: 10;
    }

    .envelope-wrapper.open .flap {
      transform: rotateX(180deg);
    }

    .envelope-wrapper.open .wax-seal {
      transform: translate(-50%, 200px);
      opacity: 0;
    }

    /* =========================
       NEWSPAPER
    ========================== */
    #newspaper {
      display: none;
      width: 95%;
      max-width: 650px;
      height: 85vh;
      margin: 4vh auto;
      opacity: 0;
      transition: opacity 1s ease;
      position: relative;
    }

    .page {
      position: absolute;
      inset: 0;
      padding: 30px;
      background: var(--paper);
      border: 1px solid #c0b7a2;
      box-shadow: inset 0 0 60px rgba(0,0,0,0.1),
                  10px 10px 40px rgba(0,0,0,0.3);
      transform-origin: left;
      transition: transform 0.8s cubic-bezier(.645,.045,.355,1);
      backface-visibility: hidden;
      overflow-y: auto;
    }

    .page.flipped { transform: rotateY(-180deg); }

    /* =========================
       NAVIGATION
    ========================== */
    .controls {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: none;
      gap: 30px;
      z-index: 200;
    }

    .btn {
      border: 1px solid #000;
      background: none;
      padding: 6px 18px;
      font-family: 'Courier Prime';
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s;
    }

    .btn:hover {
      background: #000;
      color: #fff;
    }
  </style>
</head>

<body>

<div id="flower-field"></div>

<!-- LOCK -->
<section id="overlay">
  <div id="countdown"></div>

  <div class="envelope-wrapper" id="envelope">
    <div class="flap"></div>
    <div class="wax-seal" id="seal">K</div>
  </div>
</section>

<!-- CONTENT -->
<main id="newspaper"></main>

<div class="controls" id="controls">
  <button class="btn" data-dir="-1">‚Üê PREV</button>
  <button class="btn" data-dir="1">NEXT ‚Üí</button>
</div>

<script>
/* ======================================================
   CONFIGURATION
====================================================== */
const CONFIG = {
  targetDate: new Date("January 20, 2026 00:00:00"),
  petals: ['üå∏','üåº','üåø','üçÉ','üíÆ'],
  totalPages: 5,
  backdoorCode: "KASHVI18"
};

/* ======================================================
   STATE
====================================================== */
let currentPage = 1;
let isUnlocked = false;

/* ======================================================
   INIT
====================================================== */
document.addEventListener("DOMContentLoaded", () => {
  spawnPetals();
  initCountdown();
  bindEvents();
});

/* ======================================================
   FUNCTIONS
====================================================== */
function spawnPetals() {
  const field = document.getElementById('flower-field');
  CONFIG.petals.forEach(() => {
    const petal = document.createElement('div');
    petal.className = 'petal';
    petal.textContent = CONFIG.petals[Math.floor(Math.random()*CONFIG.petals.length)];
    petal.style.left = Math.random()*100 + 'vw';
    petal.style.animationDuration = 6 + Math.random()*6 + 's';
    field.appendChild(petal);
  });
}

function initCountdown() {
  const el = document.getElementById('countdown');
  setInterval(() => {
    const diff = CONFIG.targetDate - Date.now();
    if (diff <= 0) isUnlocked = true;
    el.textContent = new Date(Math.max(diff,0)).toISOString().substr(11,8);
  }, 1000);
}

function bindEvents() {
  document.getElementById('seal').addEventListener('click', unlock);
  document.querySelector('.controls').addEventListener('click', navigate);
}

function unlock() {
  if (!isUnlocked) return;
  document.getElementById('envelope').classList.add('open');
  confetti({ particleCount: 160, spread: 70, origin:{y:0.6} });
  setTimeout(showPaper, 1200);
}

function showPaper() {
  const overlay = document.getElementById('overlay');
  overlay.style.opacity = 0;
  setTimeout(() => overlay.remove(), 800);
  document.getElementById('newspaper').style.display = 'block';
  document.getElementById('controls').style.display = 'flex';
}
</script>

</body>
</html>
